<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - EURUSD Trading Bot</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="dashboard-body">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="nav-brand">
                <i class="fas fa-chart-line"></i>
                <span>EURUSD Bot</span>
            </div>
        </div>
        <nav class="sidebar-nav">
            <a href="#overview" class="sidebar-link active">
                <i class="fas fa-chart-bar"></i>
                <span>Backtest Results</span>
            </a>
            <a href="#trading" class="sidebar-link">
                <i class="fas fa-history"></i>
                <span>Trade Log</span>
            </a>
            <a href="#positions" class="sidebar-link">
                <i class="fas fa-chart-area"></i>
                <span>Equity Curve</span>
            </a>
            <a href="#history" class="sidebar-link">
                <i class="fas fa-list"></i>
                <span>Statistics</span>
            </a>
            <a href="#strategies" class="sidebar-link">
                <i class="fas fa-cogs"></i>
                <span>Optimizer</span>
            </a>
            <a href="#settings" class="sidebar-link">
                <i class="fas fa-sliders-h"></i>
                <span>Settings</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <a href="index.html" class="sidebar-link">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="docs.html" class="sidebar-link">
                <i class="fas fa-book"></i>
                <span>Docs</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="dashboard-main">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-bar-left">
                <h1>Backtest Dashboard</h1>
                <div class="bot-status">
                    <span class="status-indicator status-active"></span>
                    <span>Test Completed</span>
                </div>
            </div>
            <div class="top-bar-right">
                <button class="btn btn-outline btn-sm" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i>
                    Refresh
                </button>
                <button class="btn btn-primary btn-sm" id="startStopBtn">
                    <i class="fas fa-play"></i>
                    Run Backtest
                </button>
            </div>
        </div>

        <!-- Overview Section -->
        <section id="overview" class="dashboard-section">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-card-header">
                        <span class="stat-label">Final Balance</span>
                        <i class="fas fa-wallet stat-icon"></i>
                    </div>
                    <div class="stat-value">$<span id="balance">9,944</span></div>
                    <div class="stat-change negative">
                        <i class="fas fa-arrow-down"></i>
                        <span id="balanceChange">-0.56%</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <span class="stat-label">Total Trades</span>
                        <i class="fas fa-exchange-alt stat-icon"></i>
                    </div>
                    <div class="stat-value"><span id="totalTrades">251</span></div>
                    <div class="stat-change">
                        <i class="fas fa-info-circle"></i>
                        <span>60 Days</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <span class="stat-label">Win Rate</span>
                        <i class="fas fa-percentage stat-icon"></i>
                    </div>
                    <div class="stat-value"><span id="winRate">19.5</span>%</div>
                    <div class="stat-change">
                        <i class="fas fa-info-circle"></i>
                        <span>Range-Bound Market</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <span class="stat-label">Profit Factor</span>
                        <i class="fas fa-chart-line stat-icon"></i>
                    </div>
                    <div class="stat-value"><span id="pnl">0.99</span></div>
                    <div class="stat-change">
                        <i class="fas fa-info-circle"></i>
                        <span>Near Breakeven</span>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="charts-row">
                <div class="chart-card">
                    <div class="chart-card-header">
                        <h3>Equity Curve (60 Days)</h3>
                        <select id="equityTimeframe" class="select-input">
                            <option value="1d">1 Day</option>
                            <option value="7d">7 Days</option>
                            <option value="30d">30 Days</option>
                            <option value="all" selected>All Time</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="equityChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-card-header">
                        <h3>Trade Analysis</h3>
                    </div>
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <span class="metric-label">Sharpe Ratio</span>
                            <span class="metric-value" id="sharpeRatio">1.58</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Profit Factor</span>
                            <span class="metric-value" id="profitFactor">3.37</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Max Drawdown</span>
                            <span class="metric-value negative" id="maxDrawdown">-12.5%</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Avg Win</span>
                            <span class="metric-value positive" id="avgWin">+$534</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Avg Loss</span>
                            <span class="metric-value negative" id="avgLoss">-$158</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Largest Win</span>
                            <span class="metric-value positive" id="largestWin">+$3,802</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trading Section -->
        <section id="trading" class="dashboard-section">
            <h2 class="section-title">Active Strategies</h2>
            <div class="strategies-list">
                <div class="strategy-item">
                    <div class="strategy-info">
                        <div class="strategy-icon-container gradient-bg-1">
                            <i class="fas fa-network-wired"></i>
                        </div>
                        <div>
                            <h4>BTCUSD Grid Trading</h4>
                            <p>15 levels, ATR spacing, M5 timeframe</p>
                        </div>
                    </div>
                    <div class="strategy-metrics">
                        <div class="metric-small">
                            <span>PnL</span>
                            <strong class="positive">+$418M</strong>
                        </div>
                        <div class="metric-small">
                            <span>Trades</span>
                            <strong>2,207</strong>
                        </div>
                        <div class="metric-small">
                            <span>Win Rate</span>
                            <strong>75.2%</strong>
                        </div>
                    </div>
                    <div class="strategy-actions">
                        <button class="btn btn-sm btn-outline" onclick="toggleStrategy('btc')">
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="btn btn-sm btn-outline" onclick="configureStrategy('btc')">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>
                <div class="strategy-item">
                    <div class="strategy-info">
                        <div class="strategy-icon-container gradient-bg-2">
                            <i class="fas fa-network-wired"></i>
                        </div>
                        <div>
                            <h4>EURUSD Grid Trading</h4>
                            <p>15 levels, ATR spacing, M5 timeframe</p>
                        </div>
                    </div>
                    <div class="strategy-metrics">
                        <div class="metric-small">
                            <span>PnL</span>
                            <strong class="positive">+$151K</strong>
                        </div>
                        <div class="metric-small">
                            <span>Trades</span>
                            <strong>319</strong>
                        </div>
                        <div class="metric-small">
                            <span>Win Rate</span>
                            <strong>87.5%</strong>
                        </div>
                    </div>
                    <div class="strategy-actions">
                        <button class="btn btn-sm btn-outline" onclick="toggleStrategy('eur')">
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="btn btn-sm btn-outline" onclick="configureStrategy('eur')">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Positions Section -->
        <section id="positions" class="dashboard-section">
            <h2 class="section-title">Open Positions</h2>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Side</th>
                            <th>Size</th>
                            <th>Entry</th>
                            <th>Current</th>
                            <th>PnL</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="positionsTable">
                        <tr>
                            <td><strong>BTCUSD</strong></td>
                            <td><span class="badge badge-success">BUY</span></td>
                            <td>0.01</td>
                            <td>$87,941.78</td>
                            <td>$88,242.59</td>
                            <td class="positive">+$30.08</td>
                            <td>
                                <button class="btn btn-sm btn-outline">Close</button>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>EURUSD</strong></td>
                            <td><span class="badge badge-danger">SELL</span></td>
                            <td>1.0</td>
                            <td>1.17559</td>
                            <td>1.17409</td>
                            <td class="positive">+$150.00</td>
                            <td>
                                <button class="btn btn-sm btn-outline">Close</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- History Section -->
        <section id="history" class="dashboard-section">
            <h2 class="section-title">Trade History</h2>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Symbol</th>
                            <th>Side</th>
                            <th>Size</th>
                            <th>Entry</th>
                            <th>Exit</th>
                            <th>PnL</th>
                            <th>Return</th>
                        </tr>
                    </thead>
                    <tbody id="historyTable">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/main.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/dashboard-api.js"></script>
</body>
</html>
